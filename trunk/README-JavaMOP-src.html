<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>JavaMOP 2.2.0 Source<title>
<style type="text/css">
<!--
  P   { margin-left:  20px; }
  PRE { margin-left:  20px; }
  LI  { margin-left:  20px; }
  H4  { margin-left:  20px; }
  H3  { margin-left:  10px; }
-->
</style>
</head>
<body>
<p>
<h1>JavaMOP 2.2.0 Source README</h1>
</p>

<p>This README file contains the installation guide and usage manual for
the JavaMOP 2.2.0 Source.</p>

<h3>Contents of this Package</h3>
<p>The <i>javamop2.2</i> directory contains</p>
<center>
<table border=1 cellpadding=3 cellspacing=0 width="90%">

<tr>
<td width=200 valign=top>README-JavaMOP-src.html</td>
<td>
This README file.
</td>
</tr>

<tr>
<td width=200 valign=top>LICENSE-JavaMOP-src.html</td>
<td>
The JavaMOP source license file.
</td>
</tr>

<tr>
<td width=200 valign=top>build.xml</td>
<td>
The ant build file.  See 1.3 for instructions on installing ant.
</td>
</tr>

</table>
</center>

<p>The <i>javamop2.2/bin</i> directory contains</p>
<center>
<table border=1 cellpadding=3 cellspacing=0 width="90%">
<tr>
<td width=200 valign=top>javamop</td>
<td>
A script to run JavaMOP with the local logic repository. 
</td>
</tr>

<tr>
<td width=200 valign=top>logicrepository</td>
<td>
A script to run the logic repository.
</td>
</tr>

<tr>
<td width=200 valign=top>testjavamop</td>
<td>
A script to run the JavaMOP test suite with the remote logic repository.
</td>
</tr>

<tr>
<td width=200 valign=top>*.bat</td>
<td>
Each *.bat file is a Windows batch file that performs the same actions as the bash script
listed above with the same name.
</td>
</tr>
</table>
</center>

<center>
<table border=1 cellpadding=3 cellspacing=0 width="90%">
</table>
</center>



<p>The <i>javamop2.2/examples</i> directory contains JavaMOP test cases in
sub-directories for each logic.  The name of each sub-directory corresponds to
the logical formalism used in the contained examples.</p>

<center>
<table border=1 cellpadding=3 cellspacing=0 width="90%">


</table>
</center>

<p>The <i>javamop2.2/lib</i> directory is a library directory containing
JavaMOP, the logic repository, logic plugins and libraries necessary for
JavaMOP and AspectJ compilation.</p>

<center>
<table border=1 cellpadding=3 cellspacing=0 width="90%">
<tr>
<td width=200 valign=top>javamop.jar</td>
<td>
The Java archive of the JavaMOP client.
</td>
</tr>

<tr>
<td width=200 valign=top>javamoprt.jar</td>
<td>
the Java Archive of Runtime Library for JavaMOP produced AspectJ programs
</td>
</tr>

<tr>
<td width=200 valign=top>logicrepository.jar</td>
<td>
The Java archive of the logic repository.
</td>
</tr>

<tr>
<td width=200 valign=top>testjavamop.jar</td>
<td>
The Java archive of the JavaMOP test suite.
</td>
</tr>

</table>
</center>

<p>The <i>javamop2.2/lib/plugins/</i> directory contains Java archives of logic plugins</p>

<p>The <i>javamop2.2/src/</i> directory contains the source code for JavaMOP,
logic repository, and JavaMOP test suite</p>

<hr>
<h2>1. Prerequisites</h2>

<h3>1.1 Install JDK 6 if Needed.</h3>

<p>JavaMOP requires java 1.6.x or newer (JDK 6). If you already have an installed JDK
check the version with javac -version.  If you already have a correct JDK
installed make sure your environment variables are properly defined as 
outlined below.</p>

<p>To install JDK 6, go to the following url<br>
<a href=http://java.sun.com/javase/downloads/index.jsp target=_blank>http://java.sun.com/javase/downloads/index.jsp</a></p>

<p>And download "Java SE Development Kit (JDK)"</p>

<p>When you download it, specify your platform. Install it by double clicking
it or executing it on the command line. Installing JDK 6 may take awhile.</p>

<p>Also set the PATH or Path variable to add the JDK 6 directory if it is not
already there. Choose Start, Settings, Control Panel, and double-click System.
On Microsoft Windows NT, select the Environment tab; on Microsoft Windows XP
and 2000, select The Advanced tab and then Environment Variables. Look for
"Path" in the User Variables and System Variables. If you're not sure where to
add the path, add it to the left end of the "Path" in the User Variables.  
A typical value for PATH is: </p>

<b><pre>In Windows,
C:\Program Files\Java\jdk1.6.0_14\bin

In Linux and Mac,
It depends on your distribution.</pre></b>

<p>Add this to the left end of the "Path" followed by ";"(":" in Linux and Mac).
For more information, refer to section 5 from the following url<br>
<a href=http://java.sun.com/j2se/1.4.2/install-windows.html target=_blank>http://java.sun.com/j2se/1.4.2/install-windows.html</a></p>

<p>--- To test:  run javac from the command line, this should display usage 
information for javac.</p>

<h3>1.2 Install AspectJ if Needed.</h3>

<p>If it is already installed make sure to set your environment variables
correctly as outlined below.</p>

<p>Download AspectJ from the following url:<br>
<a href=http://www.eclipse.org/aspectj/downloads.php target=_blank>http://www.eclipse.org/aspectj/downloads.php</a></p>

<p>Download the latest stable release if its version is 1.6.x. If the latest
stable release is later than 1.6.x, then download the most recent 1.6.x 
version of AspectJ.</p>

<p>Simply execute the jar file from the download site by either double clicking 
it(on OSes that support that) or running the command</p>

<b><pre>java -jar aspect1.6.x.jar</pre></b>

<p>At the end of installation, the installer  recommends adding some paths to 
CLASSPATH and to PATH. JavaMOP requires this step, because it assumes that ajc 
(the AspectJ compiler) is usable anywhere.  In particular if 
<i>&lt;path to aspectj&gt;/lib/aspectjrt.jar</i> is not in CLASSPATH, the test suite 
(see section 4.2) will not work.</p>

<p>--- To test:  run ajc from the command line, this should display usage 
information for ajc.  (ajc is the aspectj compiler)</p>

<h3>1.3 Install Ant if Needed.</h3>

<p>Download ant from the following url:<br>
<a href=http://ant.apache.org/bindownload.cgi target=_blank>http://ant.apache.org/bindownload.cgi</a></p>

<p>Download one of the archives in a format you are able to open.  At last
check they have archives for .zip, .tar.gz, and .tar.bz2.</p>

<p>Extract the contents of the archive.  A directory named
apache-ant-xxxx will be created where xxxx is the version number.</p>

<p>The scripts to run ant are in apache-ant-xxxx/bin.  If you wish
to execute them anywhere add this directory to your PATH environment variable.</p>

<hr>
<h2>2. JavaMOP Build</h2>

<p>From the top level directory of JavaMOP (i.e. the directory this README is in)
run</p> 

<b><pre>&lt;path to ant&gt;/bin/ant -lib lib</pre></b>

<p>If you placed ant in your PATH is it possible to simply type</p>

<b><pre>ant -lib lib</pre></b>

<p>This will build JavaMOP, the logic repository, and the test suite.</p>

<hr>
<h2>3. JavaMOP Setup and Use</h2>

<p>This section covers generating Aspectj code from a given specification. For
compiling programs with the generated Aspectj code, refer to the section 3.3.</p>

<h3>3.1 Setting Environment Variables</h3>
<p>Also set the PATH or Path variable to add the JavaMOP bin directory if it is not
already there. Choose Start, Settings, Control Panel, and double-click System.
On Microsoft Windows NT, select the Environment tab; on Microsoft Windows XP
and 2000, select The Advanced tab and then Environment Variables. Look for
"Path" in the User Variables and System Variables. If you're not sure where to
add the path, add it to the left end of the "Path" in the User Variables.  
A typical value for PATH is: </p>

<b><pre>In Windows
C:\javamop2.2\bin

In Linux and Mac,
~/javamop2.2/bin</pre></b>

<p>Add this to the left end of the "Path" followed by ";"(":" in Linux and Mac).
For more information, refer to section 5 from the following url<br>
<a href=http://java.sun.com/j2se/1.4.2/install-windows.html target=_blank>http://java.sun.com/j2se/1.4.2/install-windows.html</a></p>

<p>--- To test: run '<i>javamop</i>' from the command line, this should display usage information for javamop.</p>

<h3>3.2 Linux and Mac</h3>

<p>If you want to use the logic repository server provided by UIUC, use
<i>-remote</i> option when using the script '<i>javamop</i>'</p>

<p>If you want to use logic repository included in this package, use
<i>-local</i> option when using the script '<i>javamop</i>'</p>

<p>Using the remote repository is the preferred method for computers with
viable Internet connections.</p>

<p>The script, '<i>javamop</i>' has the following usage.</p>

<b><pre>Usage) javamop [-v] [-d &lt;target directory&gt;] &lt;specification file or dir&gt;</pre></b>

<p>-v option is verbose mode -d option is used to specify the target directory
where the resulting aspectj code will be saved. Specification files must have
The .mop file extension.</p>

<b><pre>Example) javamop -d examples/FSM examples/FSM/HasNext.mop</pre></b>

<p>For more options, type '<i>javamop</i>' or '<i>javamop -h</i>'</p>

<h3>3.3 Windows</h3>

<p>If you want to use the logic repository server provided by UIUC, use
<i>-remote</i> option when using the script '<i>javamop.bat</i>'</p>

<p>If you want to use the logic repository included in this package, use
<i>-local</i> option when using the script '<i>javamop.bat</i>'</p>

<p>The script, '<i>javamop.bat</i>' has the following usage.</p>

<b><pre>Usage) javamop.bat [-v] [-d &lt;target directory&gt;] &lt;specification file or dir&gt;</pre></b>

<p>-v option is verbose mode -d option is used to specify the target directory
where the resulting aspectj code will be saved. Specification files must have
The .mop file extension.</p>

<b><pre>Example) javamop.bat -d examples\FSM examples\FSM\HasNext.mop</pre></b>

<p>For more options, type '<i>javamop.bat</i>' or '<i>javamop.bat -h</i>'</p>

<hr>
<h2>4. Using the Additional Features of the JavaMOP Distribution</h2>

<p>Section 2 explained how to generate an Aspectj aspect file from a JavaMOP
specification file.</p>

<h3>4.1 Executing a Monitored Program</h3>

<p>When you execute a monitored program, you need to include the AspectJ library
and JavaMOP Runtime Library in your class path. JavaMOP Runtime Library is provided
in this package in javamop2.2/lib. A typical value of this is</p>

<b><pre>In Windows,
c:\javamop2.2\lib\javamoprt.jar

In Linux and Mac,
~/javamop2.2/lib/javamoprt.jar</pre></b>

<p>Add this to the left end of the "CLASSPATH" followed by ";" (in Windows) or ":" (in Linux and Max).
For more information, refer to section 5 from the following url<br>
<a href=http://java.sun.com/j2se/1.4.2/install-windows.html target=_blank>http://java.sun.com/j2se/1.4.2/install-windows.html</a></p>

<h3>4.2 The JavaMOP Test Suite</h3>

<p>JavaMOP provides a TestSuite.  The TestSuite has two main purposes: First, it
tests JavaMOP itself. JavaMOP is a very actively evolving project.  New
features are introduced regularly. We need to make sure that new feature do not
damage preexisting functionality. Second, the TestSuite can be used as a
tutorial for how to use JavaMOP to monitor programs. Furthermore, it provides
an easy way to use JavaMOP.  A user may simply provide a specification and a
program to be monitored by the specification, with a file specifying the
expected output.  The name of the file is used to match the output to the
monitored program.  See the directories in the TestSuite for examples.</p>

<p>To execute the TestSuite with the remote Logic Repository, type</p>

<p>'<i>testjavamop -remote</i>' in Linux and Mac or '<i>testjavamop.bat -remote</i>' in Windows</p>

<p>To execute the test suite with the local Logic Repository, type</p>

<p>'<i>testjavamop</i>' or '<i>testjavamop -local</i>' in Linux and Mac<br> 
or '<i>testjavamop.bat</i>' or '<i>testjavamop.bat -local</i>' in Windows</p>

<p>If you want the verbose mode pass the -v flag to the script of your choice.</p>

<p>The -j command allows multiple threads to be used to speed up the test suite.  The number of threads is specified after -j.  The default is two threads </p>

<p>If you want to add a test case, make a sub directory under
<i>javamop2.2/examples/</i> and add a specification and programs in the new
directory, with proper output files for the expected output of the given
programs. About the detailed directory structure of test cases, refer section 4.3</p>

<h3>4.3 Executing a Test Case Manually</h3>

<p>A test case directory consists of specifications and testing program
directories. All specifications will be applied to each testing program. The test
suite will automatically generate another directory for each testing program
directory with suffix _MOP, for a monitored testing program. For example,
<i>javamop2.2/examples/ERE/HasNext</i> has a specification <i>HasNext.mop</i>
and three testing program directories <i>HasNext_1</i>, <i>HasNext_2</i>, and
<i>HasNext_3</i>. TestSuite generates <i>HasNextMonitorAspect.aj</i> in the
same directory where <i>HasNext.mop</i> is. It also generates three
directories of monitored testing programs, <i>HasNext_1_MOP</i>,
<i>HasNext_2_MOP</i>, and <i>HasNext_3_MOP</i>.</p>

<p>Enter the test case directory you want. For example, <i>javamop2.2/examples/ERE/HasNext</i></p>
<p>To compile specifications, type</p>

<b><pre>javamop *.mop</pre></b>

<p>To compile all java files in a testing program directory, type</p>

<b><pre>In Windows,
javac -d &lt;testing program dir&gt; &lt;testing program dir&gt;\*.java

In Linux or Mac,
javac -d &lt;testing program dir&gt; &lt;testing program dir&gt;/*.java
</pre></b>

<p>To duplicate a program directory for monitoring, type</p>

<b><pre>cp -rp &lt;testing program dir&gt; &lt;testing program dir&gt;_MOP</pre></b>

<p>To compile aspectj code with a testing program, type</p>

<b><pre>ajc -1.5 -d &lt;testing program dir&gt;_MOP -inpath &lt;testing program dir&gt; *.aj</pre></b>

<p>To execute a monitored testing program, type</p>

<b><pre>In Windows,
java -cp "%CLASSPATH%";&lt;testing program dir&gt;_MOP &lt;testing program class&gt;

In Linux or Mac,
java -cp "$CLASSPATH":&lt;testing program dir&gt;_MOP &lt;testing program class&gt;_MOP
</pre></b>



<h3>4.4 Running the Logic Repository Tool</h3>

<p>JavaMOP uses the logic repository automatically. Therefore, you do not need to
invoke the logic repository explicitly. JavaMOP will connect to the logic
repository automatically and retrieve a monitor for the given specification.
However, it is possible to use the logic repository directly for other uses.</p>

<p>To use the logic repository, type </p>

<p>'<i>logicrepository</i>' in Linux and Mac,</p>

<p>'<i>logicrepository.bat</i>' in Windows.</p>

<p>And provide input through the standard input. For the xml syntax of input,
refer to the following pages.<br>
<a href=http://fsl.cs.uiuc.edu/index.php/Special:LogicRepository2.2 target=_blank>http://fsl.cs.uiuc.edu/index.php/Special:LogicRepository2.2</a></p>

<p>The result monitoring code is piped to standard output, in xml format.</p>

<h2>5. Contact Information</h2>

We welcome your interest in JavaMOP.  Your feedback, comments and bug
reports are highly
appreciated.  Please feel free to contact us by sending email
to  <a href="mailto:mop@cs.uiuc.edu">mop@cs.uiuc.edu</a>.
Bugs and feature requests may be submitted at
<a href="http://fsl.cs.uiuc.edu/bugzilla/enter_bug.cgi?product=MOP">BUGZILLA</a>.
First time users of our BUGZILLA system will need to create an account, but this provides
several benefits.

</body>
</html>
